<?xml version="1.0" encoding="UTF-8"?>
<!-- scan: 当此属性设置为true时，配置文件如果发生改变，将会被重新加载，默认值为true。 scanPeriod: 设置监测配置文件是否有修改的时间间隔，如果没有给出时间单位，默认单位是毫秒。当scan为true时，此属性生效。默认的时间间隔为1分钟。
	debug: 当此属性设置为true时，将打印出logback内部日志信息，实时查看logback运行状态。默认值为false。 -->
<!-- 说明：日志打印级别，大小写无关：TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF，默认是DEBUG -->
<configuration scan="false" scanPeriod="60000" debug="false">
    <!-- 导入Spring Boot默认的日志配置 -->
    <include resource="org/springframework/boot/logging/logback/base.xml" />

    <!-- [公共Appender] 默认启用 -->
    <appender name="DEFAULT-APPENDER" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 日志文件输出的位置 -->
        <File>${LOG_PATH}/common-info.log</File>
        <!-- 日志文件归档规则-按时间，每天归档一次 -->
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <FileNamePattern>
                ${LOG_PATH}/common-info.%d{yyyy-MM-dd}.log.zip
            </FileNamePattern>
        </rollingPolicy>

        <!-- 日志输出格式化，默认配置为PatternLayout -->
        <layout>
            <Pattern>
                %d{yyyy-MM-dd HH:mm:ss,SSS} [%thread] %-5level %logger{45} - %msg%n
            </Pattern>
        </layout>
    </appender>

    <!-- 定义错误日志输出 -->
    <appender name="ERROR-APPENDER"
              class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 日志文件输出的位置 -->
        <File>${LOG_PATH}/common-error.log</File>
        <!-- 追加模式 -->
        <append>true</append>
        <!-- 日志文件归档规则-按时间，每天归档一次 -->
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <FileNamePattern>
                ${LOG_PATH}/common-error.%d{yyyy-MM-dd}.log.zip
            </FileNamePattern>
        </rollingPolicy>

        <!-- 日志输出格式化，默认配置为PatternLayout -->
        <layout>
            <Pattern>
                %d{HH:mm:ss,SSS} [%thread] %-5level %logger{45} - %msg%n
            </Pattern>
        </layout>
    </appender>

    <!-- taxi-user模块日志输出配置 -->
    <appender name="TAXI-USER-APPENDER" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 日志文件输出的位置 -->
        <File>${LOG_PATH}/taxi-user.log</File>
        <!-- 追加模式 -->
        <append>true</append>
        <!-- 日志文件归档规则-按时间，每天归档一次 -->
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <FileNamePattern>
                ${LOG_PATH}/taxi-user.%d{yyyy-MM-dd}.log.zip
            </FileNamePattern>
        </rollingPolicy>

        <!-- 日志输出格式化，默认配置为PatternLayout -->
        <layout>
            <Pattern>
                %d{HH:mm:ss,SSS} %-5level %logger{22} - %msg%n
            </Pattern>
        </layout>
    </appender>

    <!-- taxi-common模块日志输出配置 -->
    <appender name="TAXI-COMMON-APPENDER" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 日志文件输出的位置 -->
        <File>${LOG_PATH}/taxi-common.log</File>
        <!-- 日志文件归档规则-按时间，每天归档一次 -->
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <FileNamePattern>
                ${LOG_PATH}/taxi-common.%d{yyyy-MM-dd}.log.zip
            </FileNamePattern>
        </rollingPolicy>

        <!-- 日志输出格式化，默认配置为PatternLayout -->
        <layout>
            <Pattern>
                %d{HH:mm:ss,SSS} %-5level %logger{22} - %msg%n
            </Pattern>
        </layout>
    </appender>

    <!-- taxi-system模块日志输出配置 -->
    <appender name="TAXI-SYSTEM-APPENDER" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 日志文件输出的位置 -->
        <File>${LOG_PATH}/taxi-system.log</File>
        <!-- 日志文件归档规则-按时间，每天归档一次 -->
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <FileNamePattern>
                ${LOG_PATH}/taxi-system.%d{yyyy-MM-dd}.log.zip
            </FileNamePattern>
        </rollingPolicy>

        <!-- 日志输出格式化，默认配置为PatternLayout -->
        <layout>
            <Pattern>
                %d{HH:mm:ss,SSS} %-5level %logger{22} - %msg%n
            </Pattern>
        </layout>
    </appender>

    <!-- 会话拦截器日志输出配置 -->
    <appender name="TAXI-INTERCEPTOR-SESSION" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 日志文件输出的位置 -->
        <File>${LOG_PATH}/taxi-interceptor-session.log</File>
        <!-- 追加模式 -->
        <append>true</append>
        <!-- 日志文件归档规则-按时间，每天归档一次 -->
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <FileNamePattern>
                ${LOG_PATH}/taxi-interceptor-session.%d{yyyy-MM-dd}.log.zip
            </FileNamePattern>
        </rollingPolicy>

        <!-- 日志输出格式化，默认配置为PatternLayout -->
        <layout>
            <Pattern>
                %d{HH:mm:ss,SSS} %-5level %logger{45} - %msg%n
            </Pattern>
        </layout>
    </appender>

    <!-- 过滤器日志输出配置 -->
    <appender name="TAXI-FILTER-SESSION" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 日志文件输出的位置 -->
        <File>${LOG_PATH}/taxi-filter-session.log</File>
        <!-- 日志文件归档规则-按时间，每天归档一次 -->
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <FileNamePattern>
                ${LOG_PATH}/taxi-filter-session.%d{yyyy-MM-dd}.log.zip
            </FileNamePattern>
        </rollingPolicy>

        <!-- 日志输出格式化，默认配置为PatternLayout -->
        <layout>
            <Pattern>
                %d{HH:mm:ss,SSS} %-5level %logger{45} - %msg%n
            </Pattern>
        </layout>
    </appender>

    <!-- 支付日志输出配置 -->
    <appender name="TAXI-PAY" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 日志文件输出的位置 -->
        <File>${LOG_PATH}/taxi-pay.log</File>
        <!-- 日志文件归档规则-按时间，每天归档一次 -->
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <FileNamePattern>
                ${LOG_PATH}/taxi-pay-session.%d{yyyy-MM-dd}.log.zip
            </FileNamePattern>
        </rollingPolicy>

        <!-- 日志输出格式化，默认配置为PatternLayout -->
        <layout>
            <Pattern>
                %d{HH:mm:ss,SSS} %-5level %logger{45} - %msg%n
            </Pattern>
        </layout>
    </appender>

    <!-- 支付日志输出配置 -->
    <appender name="TAXI-MESSAGE-PUSH" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 日志文件输出的位置 -->
        <File>${LOG_PATH}/taxi-message-push.log</File>
        <!-- 日志文件归档规则-按时间，每天归档一次 -->
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <FileNamePattern>
                ${LOG_PATH}/taxi-message-push-session.%d{yyyy-MM-dd}.log.zip
            </FileNamePattern>
        </rollingPolicy>

        <!-- 日志输出格式化，默认配置为PatternLayout -->
        <layout>
            <Pattern>
                %d{HH:mm:ss,SSS} %-5level %logger{45} - %msg%n
            </Pattern>
        </layout>
    </appender>


    <!-- 定义全局日志root，默认开启INFO级别日志 -->
    <root level="INFO">
        <appender-ref ref="DEFAULT-APPENDER" />
    </root>
    <!--
        name 要输出日志的包名或者某个类具体的权限路径
        additivity-
            false：只用当前logger的AppenderRef
            true：使用当前logger的AppenderRef 以及root的AppenderRef
        level：日志打印级别
    -->
    <logger name="com.yoogurt.taxi.common" additivity="false" level="INFO">
        <appender-ref ref="TAXI-COMMON-APPENDER" />
        <appender-ref ref="ERROR-APPENDER" />
    </logger>

    <logger name="com.yoogurt.taxi.user" additivity="false" level="INFO">
        <appender-ref ref="TAXI-USER-APPENDER" />
        <appender-ref ref="ERROR-APPENDER" />
    </logger>

    <logger name="com.yoogurt.taxi.system" additivity="false" level="INFO">
        <appender-ref ref="TAXI-SYSTEM-APPENDER" />
        <appender-ref ref="ERROR-APPENDER" />
    </logger>
    <logger name="tk.mybatis" additivity="false" level="DEBUG">
        <appender-ref ref="DEFAULT-APPENDER" />
        <appender-ref ref="ERROR-APPENDER" />
    </logger>

    <logger name="INTERCEPTOR-SESSION" additivity="false" level="INFO">
        <appender-ref ref="TAXI-INTERCEPTOR-SESSION" />
        <appender-ref ref="ERROR-APPENDER" />
    </logger>

    <logger name="INTERCEPTOR-EXCEPTION" additivity="false" level="INFO">
        <appender-ref ref="ERROR-APPENDER" />
    </logger>

    <logger name="FILTER-SESSION" additivity="false" level="INFO">
        <appender-ref ref="TAXI-FILTER-SESSION" />
        <appender-ref ref="ERROR-APPENDER" />
    </logger>

    <logger name="TAXI-PAY" additivity="false" level="INFO">
        <appender-ref ref="TAXI-PAY" />
        <appender-ref ref="ERROR-APPENDER" />
    </logger>

    <logger name="TAXI-MESSAGE-PUSH" additivity="false" level="INFO">
        <appender-ref ref="TAXI-MESSAGE-PUSH" />
        <appender-ref ref="ERROR-APPENDER" />
    </logger>

</configuration>